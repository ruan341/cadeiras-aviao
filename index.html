<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>SeleÃ§Ã£o de Poltronas â€“ Airbus A350</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  text-align: center;
}

.section {
  margin: 25px 0;
}

.title {
  font-weight: bold;
  margin-bottom: 10px;
}

.row {
  display: flex;
  justify-content: center;
  margin-bottom: 6px;
}

.seat {
  width: 36px;
  height: 36px;
  margin: 3px;
  background: #2ecc71;
  color: white;
  font-size: 11px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  cursor: pointer;
}

.first { background: #8e44ad; }
.business { background: #2980b9; }
.economy { background: #27ae60; }

.selected {
  outline: 3px solid #f1c40f;
}

.occupied {
  background: #7f8c8d !important;
  cursor: not-allowed;
}

.aisle {
  width: 20px;
}

button {
  margin: 20px;
  padding: 12px 30px;
  font-size: 16px;
}
</style>
</head>

<body>

<h2>SeleÃ§Ã£o de Poltronas â€“ Airbus A350</h2>

<div id="plane"></div>

<button onclick="confirmSeat()">Confirmar Poltrona</button>

<script>
let selectedSeat = null;

/* ðŸ”— LINKS PRONTOS */
const FORM_LINK =
"https://docs.google.com/forms/d/e/1FAIpQLSf0wYXE6i7JPQCBkKR5LqyRdwxRscpSmclDMQJXTs_llonIbA/viewform?usp=pp_url&entry.1796450485=SEAT_AQUI";

/* ðŸ’¾ POLTRONAS OCUPADAS */
let occupiedSeats = JSON.parse(localStorage.getItem("occupiedSeats")) || [];

// FunÃ§Ã£o auxiliar
function createSeat(row, letter, cls) {
  const seat = document.createElement("div");
  const seatId = row + letter;
  seat.className = `seat ${cls}`;
  seat.innerText = seatId;

  if (occupiedSeats.includes(seatId)) {
    seat.classList.add("occupied");
  }

  seat.onclick = () => {
    if (seat.classList.contains("occupied")) return;

    document.querySelectorAll(".seat")
      .forEach(s => s.classList.remove("selected"));

    seat.classList.add("selected");
    selectedSeat = seatId;
  };

  return seat;
}

const plane = document.getElementById("plane");

/* ===== FIRST CLASS ===== */
plane.innerHTML += `<div class="section"><div class="title">First Class</div></div>`;
for (let r = 1; r <= 2; r++) {
  const row = document.createElement("div");
  row.className = "row";

  row.appendChild(createSeat(r,"A","first"));
  row.appendChild(document.createElement("div")).className="aisle";
  row.appendChild(createSeat(r,"D","first"));
  row.appendChild(createSeat(r,"G","first"));
  row.appendChild(document.createElement("div")).className="aisle";
  row.appendChild(createSeat(r,"K","first"));

  plane.appendChild(row);
}

/* ===== BUSINESS CLASS ===== */
plane.innerHTML += `<div class="section"><div class="title">Business Class</div></div>`;
for (let r = 3; r <= 8; r++) {
  const row = document.createElement("div");
  row.className = "row";

  row.appendChild(createSeat(r,"A","business"));
  row.appendChild(createSeat(r,"C","business"));
  row.appendChild(document.createElement("div")).className="aisle";
  row.appendChild(createSeat(r,"D","business"));
  row.appendChild(createSeat(r,"G","business"));
  row.appendChild(document.createElement("div")).className="aisle";
  row.appendChild(createSeat(r,"H","business"));
  row.appendChild(createSeat(r,"K","business"));

  plane.appendChild(row);
}

/* ===== ECONOMY CLASS ===== */
plane.innerHTML += `<div class="section"><div class="title">Economy Class</div></div>`;
for (let r = 9; r <= 40; r++) {
  const row = document.createElement("div");
  row.className = "row";

  ["A","B","C"].forEach(l => row.appendChild(createSeat(r,l,"economy")));
  row.appendChild(document.createElement("div")).className="aisle";
  ["D","E","F"].forEach(l => row.appendChild(createSeat(r,l,"economy")));
  row.appendChild(document.createElement("div")).className="aisle";
  ["G","H","J"].forEach(l => row.appendChild(createSeat(r,l,"economy")));

  plane.appendChild(row);
}

function confirmSeat() {
  if (!selectedSeat) {
    alert("Selecione uma poltrona!");
    return;
  }

  if (!occupiedSeats.includes(selectedSeat)) {
    occupiedSeats.push(selectedSeat);
    localStorage.setItem("occupiedSeats", JSON.stringify(occupiedSeats));
  }

  window.location.href =
    FORM_LINK.replace("SEAT_AQUI", selectedSeat);
}
</script>

</body>
</html>
